<!DOCTYPE html>
<html>
<head>
  <title>Product Analytics Dashboard</title>
  <script src="https://www.chartjs.org/dist/master/chart.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }

    h1 {
      text-align: center;
      margin-top: 20px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    th, td {
      padding: 10px;
      text-align: left;
      border-bottom: 1px solid #ddd;
    }

    th {
      background-color: #f2f2f2;
      font-weight: bold;
    }

    tr:hover {
      background-color: #f5f5f5;
    }

    #chartContainer {
      width: 600px;
      height: 400px;
      margin: 0 auto;
    }
  </style>
</head>
<body>
  <h1>Product Analytics Dashboard</h1>
  <div id="chartContainer">
    <canvas id="productChart"></canvas>
  </div>
  <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Product Name</th>
          <th>Product ID</th>
          <th>Product Amount</th>
          <th>Packaging Used</th>
          <th>Carbon Footprint</th>
          <th>Shipping Cost</th>
          <th>Discount</th>
        </tr>
      </thead>
      <tbody>
        <% products.forEach(product => { %>
          <tr>
            <td><%= product.id %></td>
            <td><%= product.productName %></td>
            <td><%= product.productId %></td>
            <td><%= product.productAmount %></td>
            <td><%= product.packagingUsed %></td>
            <td><%= product.carbonFootprint %></td>
            <td><%= product.shippingCost %></td>
            <td><%= product.discount %></td>
          </tr>
        <% }) %>
      </tbody>
    </table>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Retrieve the product amounts and product names from the products data
      const productAmounts = <%= JSON.stringify(products.map(product => product.productAmount)) %>;
      const productNames = <%= JSON.stringify(products.map(product => product.productName)) %>;

      // Create a chart using Chart.js
      const ctx = document.getElementById('productChart').getContext('2d');
      new Chart(ctx, {
        type: 'bar',
        data: {
          labels: productNames,
          datasets: [{
            label: 'Product Amounts',
            data: productAmounts,
            backgroundColor: 'rgba(75, 192, 192, 0.6)',
            borderColor: 'rgba(75, 192, 192, 1)',
            borderWidth: 1
          }]
        },
        options: {
          responsive: true,
          scales: {
            y: {
              beginAtZero: true
            }
          }
        }
      });
    });
  </script>
</body>
</html>
